var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player;function onYouTubeIframeAPIReady(){var a=getURLParams().v;player=new YT.Player("player",{height:"566",width:"960",videoId:a,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(a){a.target.playVideo();var b=getURLParams();if(b.startTime){document.getElementById("startTime").value=b.startTime}if(b.endTime){document.getElementById("endTime").value=b.endTime}setInterval(videoTick,150)}var initEndTime=false;function onPlayerStateChange(a){if(a.data==YT.PlayerState.PLAYING&&!initEndTime){if(document.getElementById("endTime").value=="0:00"){document.getElementById("endTime").value=secondsToTime(player.getDuration())}else{document.getElementById("endTime").value=secondsToTime(timeToSeconds(document.getElementById("endTime").value))}initEndTime=true;updateTimes()}}function videoTick(){var b=player.getCurrentTime();var a=timeToSeconds(document.getElementById("endTime").value);var c=timeToSeconds(document.getElementById("startTime").value);if(b>=a&&a>c){player.seekTo(c,true)}}function updateTimes(){var f=getURLParams().v;var e=secondsToTime(timeToSeconds(document.getElementById("startTime").value));var b=secondsToTime(timeToSeconds(document.getElementById("endTime").value));document.getElementById("startTime").value=e;document.getElementById("endTime").value=b;player.seekTo(timeToSeconds(e),true);var d="http://www.youtubeencore.com/watch?v="+f+"&startTime="+e+"&endTime="+b;var c=Math.ceil(d.length/18);var a=qrcode(c,"M");a.addData(d);a.make();document.getElementById("qrcode").innerHTML=a.createImgTag()}function secondsToTime(b){var a=Math.floor(b/60);var c=Math.floor((b-a*60)*100)/100;if(c<10){c="0"+c}return a+":"+c}function timeToSeconds(a){var b=a.indexOf(":");return a.substring(0,b)*60+a.substring(b+1)*1}function getURLParams(){var a=window.location.search.substr(1);var c=a.split("&");var e={};for(var b=0;b<c.length;b++){var d=c[b].split("=");e[d[0]]=d[1]}return e};