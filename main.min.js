var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player;function onYouTubeIframeAPIReady(){var a=getURLParams().v;player=new YT.Player("player",{height:"566",width:"960",videoId:a,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function $(a){return document.getElementById(a)}function onPlayerReady(a){a.target.playVideo();var b=getURLParams();if(b.startTime){$("startTime").value=b.startTime}if(b.endTime){$("endTime").value=b.endTime}setInterval(videoTick,150)}var initEndTime=false;function onPlayerStateChange(a){if(a.data==YT.PlayerState.PLAYING&&!initEndTime){if($("endTime").value=="0:00"){$("endTime").value=secondsToTime(player.getDuration())}else{$("endTime").value=secondsToTime(timeToSeconds($("endTime").value))}initEndTime=true;updateTimes()}}function videoTick(){var b=player.getCurrentTime();var a=timeToSeconds($("endTime").value);var c=timeToSeconds($("startTime").value);if(b>=a&&a>c){player.seekTo(c,true)}}function updateTimes(){var f=getURLParams().v;var e=secondsToTime(timeToSeconds($("startTime").value));var b=secondsToTime(timeToSeconds($("endTime").value));$("startTime").value=e;$("endTime").value=b;player.seekTo(timeToSeconds(e),true);var d="http://www.youtubeencore.com/watch?v="+f+"&startTime="+e+"&endTime="+b;var c=Math.ceil(d.length/18);var a=qrcode(c,"M");a.addData(d);a.make();$("qrcode").innerHTML=a.createImgTag()}function secondsToTime(b){var a=Math.floor(b/60);var c=Math.floor((b-a*60)*100)/100;if(c<10){c="0"+c}return a+":"+c}function timeToSeconds(a){var b=a.indexOf(":");return a.substring(0,b)*60+a.substring(b+1)*1}function getURLParams(){var a=window.location.search.substr(1);var c=a.split("&");var e={};for(var b=0;b<c.length;b++){var d=c[b].split("=");e[d[0]]=d[1]}return e};